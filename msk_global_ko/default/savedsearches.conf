[rpt_globalko_AdminUsers_lookup]
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = * 2 * * *
description = Builds the list of admin users. MSK domain accounts are extracted and are by default in lower case form. Lookup will apply a case insensitive match.
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.events.fields = ["host","source","sourcetype","DurationInSeconds","guid","sourceHost","search","exec_time","duration_command_search_index","ActivateDateReference","ActivateDaysBefore","ActivateHoursBefore","ActivateStatus","Active","AFR","AFX","age","ALC","ALK","ALP","ALT","ANC","AncillaryReferenceCode","ApplicSource","ArrivalDtm","AUC","BE","BMT_RAVUlizumab_Maint_Dose","BRST_SACItuzumab_govitecan_hziy_wt","BSA","Calculation","Cap","cap","carfilzomib","CDC_Operation","ChartGUID","ChemoS_InPt_Methotrexate","ClientGUID","ClientVisitGUID","Code","CompleteDateReference","CompleteDaysAfter","CompleteHoursAfter","CompleteStatus","Concentration","CrCl","creat","CreatedBy","CreatedWhen","Cyc","cyc","cycle","Cycle","days","Days","dose","Dose","DOSE","dosing","Duration","E8_PFU","EF","Entered","EnterRole","eventtype","FrequencyCode","gm","HasBeenModified","HoldReasonText","IDCode","index","infiltration","Infusion","init","InitialSessionTypeCode","is","IsAutoActivatable","IsAutoCompletable","IsAutoGenerated","IsCompleteTemplate","IsConditional","IsDurationChangeable","IsForDischarge","IsGenericSet","IsHeld","IsIncluded","IsOrderSet","IsPartOfSet","IsPRN","IsSRXOrder","IsSuspended","IsTrackVariance","Kg","kg","LFR","LFX","linecount","m2","Max","max","mcg","MDTX","meq","mg","MinimumStatusForActivation","mL__Tx_Params__ALC","ModifiedDtm","Modifier","ModifyUserGUID","MRN","MTX","MUST","Name","number","old","Only","or","OrderCatalogMasterItemGUID","OrderGUID","OrderPriorityCode","OrderSetHeading","OrderSetName","OrderSetType","OrderStatusCode","OrderStatusLevelNum","OrderUserData_UserDataCode","OrderUserData_Value","Pain","PEDNO_95_040_CARBOplatin","per","PerformedDtm","plts","PM","punct","QTcF","rate","Recombinant","RepeatOrder","ReqCodedTime","ReqTimeEventModifier","ReqTimeValue","RequestedDate","RequestedDtm","RequestedTime","ScheduledDTM","SequenceNum","Serum_CREAT","SignificantDtm","SignificantTime","SourceCode","splunk_server","SRXMedicationFormCode","SRXOrderNum","SRXRouteCode","StopDate","StopDtm","StopTime","SubSequenceNum","SummaryLine","SystemOrderPriorityCode","tag","tag::eventtype","TherapeuticCategory","time","ToBeSigned","ToBeVerified","TouchedWhen","Tx","TxStarted","TypeCode","units","Units","unix_category","unix_group","UserGUID","VarianceType","Vol","Volume","weight","Weight","WEIGHT","Wt","wt"]
display.general.timeRangePicker.show = 0
display.general.type = statistics
display.page.search.mode = verbose
display.page.search.tab = statistics
display.visualizations.charting.chart = line
display.visualizations.custom.type = calendar_app.calendar
display.visualizations.show = 0
enableSched = 1
request.ui_dispatch_app = search
request.ui_dispatch_view = search
search = | rest /services/authentication/users\
| search roles=admin type!=splunk\
| dedup title\
| rex field=email ".*@(?<Domain>.*)\."\
| eval WindowsUsername=Domain +"\\" + title\
| table title,realname,email,WindowsUsername\
| outputlookup create_empty=true lk_splunkadmin_users.csv

[rpt_EMPLOYEES_ActiveEmployees_Backup]
action.email.useNSSubject = 1
alert.track = 0
cron_schedule = 0 1 * * *
description = Creates the active Employee lookup file with all employee data.
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.timeRangePicker.show = 0
enableSched = 1
schedule_window = auto
search = | dbxquery shortnames=true connection="dbc_CIS_Prod_CISPortal" query="SELECT * FROM MSKCC.Splunk.VW_EmployeeInfo_EmployeesActive;" | outputlookup lk_msk_EmployeeInfo_Active_backup.csv

[alert_EMPLOYEES_ActiveEmployee_CreateInputFileLookup]
action.lookup = 1
action.lookup.filename = lk_msk_EmployeeInfo_Active.csv
alert.suppress = 0
alert.track = 0
counttype = number of events
cron_schedule = 0 2 * * *
description = This alert trigger will fire if there are Employee records written out to the backup file. If there are records, then the existing input file should be overwritten. If no records, do not over-write.
dispatch.earliest_time = -1d
dispatch.latest_time = now
enableSched = 1
quantity = 0
relation = greater than
search = | inputlookup lk_msk_EmployeeInfo_Active_backup.csv
